Modified the code to reflect the principles from Clean Code, chapters 9, 10 and 12.